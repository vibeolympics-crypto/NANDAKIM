# Production Environment Configuration
# Copy this file to .env.production and fill in your values

# ============================================================================
# NODE ENVIRONMENT
# ============================================================================
NODE_ENV=production

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
PORT=3001
HOST=0.0.0.0
CORS_ORIGIN=https://yourdomain.com

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# Generate secure secrets:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your_64_character_random_string_change_this_in_production
CSRF_SECRET=your_64_character_random_string_change_this_in_production
TOKEN_EXPIRES=3600
REFRESH_TOKEN_EXPIRES=604800

# Admin Credentials
ADMIN_USERNAME=admin
# Generate password hash:
# node -e "console.log(require('bcrypt').hashSync('your_password', 10))"
ADMIN_PASSWORD_HASH=$2b$10$your_bcrypt_hash_here

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Options: postgres, mongodb, file
DATABASE_TYPE=postgres

# PostgreSQL Configuration
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=portfolio
POSTGRES_USER=portfolio_user
POSTGRES_PASSWORD=your_secure_database_password
POSTGRES_POOL_MAX=20
POSTGRES_POOL_MIN=5
POSTGRES_IDLE_TIMEOUT=30000
POSTGRES_CONNECTION_TIMEOUT=2000

# PostgreSQL SSL (Production)
POSTGRES_SSL_REJECT_UNAUTHORIZED=true
# POSTGRES_SSL_CA=/path/to/ca-certificate.crt
# POSTGRES_SSL_CERT=/path/to/client-certificate.crt
# POSTGRES_SSL_KEY=/path/to/client-key.key

# MongoDB Configuration (Alternative to PostgreSQL)
# MONGODB_URI=mongodb://username:password@localhost:27017/portfolio?authSource=admin
# MONGODB_POOL_MAX=10
# MONGODB_POOL_MIN=2
# MONGODB_TIMEOUT=5000
# MONGODB_SOCKET_TIMEOUT=45000
# MONGODB_TLS=true
# MONGODB_TLS_CA_FILE=/path/to/ca.pem
# MONGODB_TLS_CERT_KEY_FILE=/path/to/client.pem

# File-based Storage (Development only)
DATA_DIR=./server/data
BACKUP_DIR=./server/backups

# ============================================================================
# REDIS CONFIGURATION (Caching & Sessions)
# ============================================================================
REDIS_ENABLED=true
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_secure_redis_password
REDIS_DB=0
REDIS_CONNECT_TIMEOUT=10000

# Redis TLS (Production)
# REDIS_TLS=true
# REDIS_TLS_REJECT_UNAUTHORIZED=true
# REDIS_TLS_CA=/path/to/ca.crt
# REDIS_TLS_CERT=/path/to/client.crt
# REDIS_TLS_KEY=/path/to/client.key

# Cache TTL Settings (in seconds)
CACHE_TTL_SHORT=300      # 5 minutes
CACHE_TTL_MEDIUM=3600    # 1 hour
CACHE_TTL_LONG=86400     # 1 day
CACHE_TTL_WEEK=604800    # 7 days

# ============================================================================
# STORAGE CONFIGURATION
# ============================================================================
# Options: local, s3
STORAGE_TYPE=s3

# Local Storage (Not recommended for production)
UPLOAD_DIR=./public/media
TEMP_DIR=./temp
PUBLIC_MEDIA_PATH=/media
MAX_FILE_SIZE=10485760  # 10MB in bytes

# AWS S3 Storage (Recommended for production)
S3_BUCKET_NAME=your-portfolio-media-bucket
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key

# S3-Compatible Services (DigitalOcean Spaces, MinIO, etc.)
# S3_ENDPOINT=https://nyc3.digitaloceanspaces.com
# S3_FORCE_PATH_STYLE=true

# ============================================================================
# CDN CONFIGURATION
# ============================================================================
CDN_ENABLED=true
CDN_URL=https://yourdomain.com

# CloudFlare Configuration
CLOUDFLARE_ZONE_ID=your_cloudflare_zone_id
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token
CLOUDFLARE_PURGE_URL=https://api.cloudflare.com/client/v4/zones

# AWS CloudFront Configuration (Alternative to CloudFlare)
# CLOUDFRONT_DISTRIBUTION_ID=E1234567890ABC
# CLOUDFRONT_DOMAIN=d1234567890.cloudfront.net

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM (cron format)
BACKUP_RETENTION_DAYS=30
BACKUP_DESTINATION=./backups

# S3 Backup (Recommended)
BACKUP_S3_ENABLED=true
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_PREFIX=backups/

# Backup Notifications
BACKUP_NOTIFICATIONS_ENABLED=true
BACKUP_NOTIFICATION_EMAIL=admin@yourdomain.com
BACKUP_SLACK_WEBHOOK=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ============================================================================
# EMAIL CONFIGURATION (SMTP)
# ============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your_app_password
EMAIL_FROM_NAME=Portfolio Admin
EMAIL_FROM_ADDRESS=noreply@yourdomain.com

# ============================================================================
# EXTERNAL SERVICES
# ============================================================================
# Google Maps
VITE_GOOGLE_MAPS_API_KEY=your_google_maps_api_key

# Kakao Maps (Alternative)
# VITE_KAKAO_MAPS_API_KEY=your_kakao_maps_api_key

# Google Analytics
GA_TRACKING_ID=G-XXXXXXXXXX

# Google AdSense
# ADSENSE_PUBLISHER_ID=ca-pub-1234567890123456

# Sentry (Error Tracking)
SENTRY_DSN=https://your_sentry_dsn@sentry.io/project_id
VITE_SENTRY_DSN=https://your_sentry_dsn@sentry.io/project_id

# ============================================================================
# LOGGING & MONITORING
# ============================================================================
LOG_LEVEL=info
METRICS_ENABLED=true

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================
DEPLOY_HOST=yourdomain.com
DEPLOY_USER=deploy
DEPLOY_PATH=/var/www/portfolio-production
DEPLOY_URL=https://yourdomain.com

# ============================================================================
# NOTES
# ============================================================================
# 1. Never commit this file with real values to version control
# 2. Generate strong random secrets for JWT_SECRET and CSRF_SECRET
# 3. Use bcrypt hash for ADMIN_PASSWORD_HASH, not plain text
# 4. Enable SSL/TLS for all services in production
# 5. Set up firewall rules to restrict database and Redis access
# 6. Configure automated backups and test restore procedures
# 7. Enable monitoring and alerting
# 8. Review security checklist before going live

# SSH Configuration
# Make sure your SSH key is added to the server:
# ssh-copy-id deploy@yourdomain.com
